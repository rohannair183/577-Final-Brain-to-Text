experiment:
  name: "big_rnn_quick"
  description: "Quick 1-epoch run on small subset for fast validation"
  seed: 42
  tags: ["rnn", "ctc", "quick"]

data:
  data_root: "data/raw"

  train_sessions:
    - "t15.2023.08.11"
    - "t15.2023.08.13"

  val_sessions:
    - "t15.2023.09.24"

  test_sessions:
    - "t15.2023.10.01"

  batch_size: 32
  num_workers: 0
  pin_memory: false
  shuffle_train: true

model:
  type: "rnn"
  input_dim: 512
  num_phonemes: 41
  hidden_dim: 512
  num_layers: 5
  dropout: 0.25
  bidirectional: true
  nonlinearity: "tanh"

training:
  num_epochs: 1

  loss:
    type: "ctc"
    blank_id: 0

  optimizer:
    type: "adamw"
    learning_rate: 0.0003
    weight_decay: 0.01
    betas: [0.9, 0.999]
    eps: 1.0e-8

  scheduler:
    type: "cosine"
    t_max: 1
    eta_min: 1.0e-6

  gradient_clip: 1.0

  checkpoint_dir: "experiments/big_rnn_quick"
  save_every_n_epochs: 1
  keep_last_n_checkpoints: 1

  early_stopping:
    enabled: false
    patience: 6
    metric: "val_per"
    mode: "min"

evaluation:
  validate_every_n_epochs: 1
  compute_per: true
  compute_wer: true
  compute_cer: true
  decode_method: "greedy"
  beam_width: 10

logging:
  log_dir: "experiments/big_rnn_quick/logs"
  log_every_n_steps: 25
  use_tensorboard: false
  use_wandb: false
  log_learning_rate: true
  log_gradients: false
  log_weights: false
  log_n_predictions: 2

compute:
  device: "auto"
  mixed_precision: false
  cudnn_benchmark: true
  deterministic: false

debug:
  fast_dev_run: false
  overfit_batches: 0
  profile: false
  detect_anomaly: false
  check_data_once: true
